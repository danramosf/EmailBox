<!DOCTYPE html>
<html>
<head>
  <title>changelog.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\apollo-upload-server\\changelog.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#apollo-upload-server-changelog">apollo-upload-server changelog</a>
      </div>

      <div class="heading h2">
        <a href="#5.0.0">5.0.0</a>
      </div>

      <div class="heading h2">
        <a href="#4.0.2">4.0.2</a>
      </div>

      <div class="heading h2">
        <a href="#4.0.1">4.0.1</a>
      </div>

      <div class="heading h2">
        <a href="#4.0.0">4.0.0</a>
      </div>

      <div class="heading h2">
        <a href="#4.0.0-alpha.3">4.0.0-alpha.3</a>
      </div>

      <div class="heading h2">
        <a href="#4.0.0-alpha.2">4.0.0-alpha.2</a>
      </div>

      <div class="heading h2">
        <a href="#4.0.0-alpha.1">4.0.0-alpha.1</a>
      </div>

      <div class="heading h2">
        <a href="#3.0.0">3.0.0</a>
      </div>

      <div class="heading h2">
        <a href="#2.0.4">2.0.4</a>
      </div>

      <div class="heading h2">
        <a href="#2.0.3">2.0.3</a>
      </div>

      <div class="heading h2">
        <a href="#2.0.2">2.0.2</a>
      </div>

      <div class="heading h2">
        <a href="#2.0.1">2.0.1</a>
      </div>

      <div class="heading h2">
        <a href="#2.0.0">2.0.0</a>
      </div>

      <div class="heading h2">
        <a href="#1.1.0">1.1.0</a>
      </div>

      <div class="heading h2">
        <a href="#1.0.2">1.0.2</a>
      </div>

      <div class="heading h2">
        <a href="#1.0.1">1.0.1</a>
      </div>

      <div class="heading h2">
        <a href="#1.0.0">1.0.0</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="apollo-upload-server-changelog">
  <h1>
    <a href="#apollo-upload-server-changelog" name="apollo-upload-server-changelog" class="pilcrow"></a>
apollo-upload-server changelog
  </h1>
</div>
<div class="pilwrap" id="5.0.0">
  <h2>
    <a href="#5.0.0" name="5.0.0" class="pilcrow"></a>
5.0.0
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li><code>graphql</code> peer dependency range updated to <code>^0.13.1</code> for native ESM support via <code>.mjs</code>. It’s a breaking change despite being a semver patch.</li>
<li>More robust npm scripts, with the ability to watch builds and tests together.</li>
<li>Fixed missing dev dependency for fetching in tests.</li>
<li>Using <a href="https://github.com/avajs/eslint-plugin-ava"><code>eslint-plugin-ava</code></a>.</li>
<li>HTTPS <code>package.json</code> author URL.</li>
<li>New readme logo URL that does’t need to be updated every version.</li>
</ul>
<div class="pilwrap" id="4.0.2">
  <h2>
    <a href="#4.0.2" name="4.0.2" class="pilcrow"></a>
4.0.2
  </h2>
</div>
<ul>
<li>Temporary solution for importing CommonJS in <code>.mjs</code>, fixing reopened <a href="https://github.com/jaydenseric/apollo-upload-server/issues/40">#40</a>.</li>
</ul>
<div class="pilwrap" id="4.0.1">
  <h2>
    <a href="#4.0.1" name="4.0.1" class="pilcrow"></a>
4.0.1
  </h2>
</div>
<ul>
<li>Correct imports for vanilla Node.js <code>--experimental-modules</code> and <code>.mjs</code> support, fixing <a href="https://github.com/jaydenseric/apollo-upload-server/issues/40">#40</a>.</li>
</ul>
<div class="pilwrap" id="4.0.0">
  <h2>
    <a href="#4.0.0" name="4.0.0" class="pilcrow"></a>
4.0.0
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Simplified npm scripts.</li>
<li>Readme updates:
<ul>
<li>Documented <a href="https://developer.mozilla.org/en/docs/Web/API/Blob"><code>Blob</code></a> types, via <a href="https://github.com/jaydenseric/apollo-upload-server/pull/39">#39</a>.</li>
<li>Explained how to use <code>processRequest</code> for custom middleware.</li>
<li>Improved usage instructions.</li>
<li>Display oldest supported Node.js version.</li>
<li>Misc. tweaks including a simpler heading structure.</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="4.0.0-alpha.3">
  <h2>
    <a href="#4.0.0-alpha.3" name="4.0.0-alpha.3" class="pilcrow"></a>
4.0.0-alpha.3
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Updated peer dependencies to support <code>graphql@0.12</code>, via <a href="https://github.com/jaydenseric/apollo-upload-server/pull/36">#36</a>.</li>
</ul>
<div class="pilwrap" id="4.0.0-alpha.2">
  <h2>
    <a href="#4.0.0-alpha.2" name="4.0.0-alpha.2" class="pilcrow"></a>
4.0.0-alpha.2
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Smarter Babel config with <code>.babelrc.js</code>.</li>
<li>Transpile and polyfill for Node.js v6.10+ (down from v7.6+) to <a href="https://docs.aws.amazon.com/lambda/latest/dg/current-supported-versions.html">support AWS Lambda</a>, fixing <a href="https://github.com/jaydenseric/apollo-upload-server/issues/33">#33</a>.</li>
<li>Modular project structure that works better for native ESM.</li>
<li>Added tests.</li>
<li>Set up Travis to test using the latest stable Node.js version and the oldest supported in <code>package.json</code> <code>engines</code> (v6.10).</li>
<li>Added a Travis readme badge.</li>
<li>Refactor to use fewer Busboy event listeners.</li>
<li>Improved error handling, fixing <a href="https://github.com/jaydenseric/apollo-upload-server/issues/26">#26</a>:
<ul>
<li>Custom errors are thrown or emitted with meaningful messages that are exported so consumers can use <code>instanceof</code> with them.</li>
<li>Where it makes sense, errors cause relevant HTTP status codes to be set in middleware.</li>
<li><a href="https://github.com/jaydenseric/graphql-multipart-request-spec">Misordered multipart fields</a> cause <code>processRequest</code> to throw <code>MapBeforeOperationsUploadError</code> and <code>FilesBeforeMapUploadError</code> errors in middleware.</li>
<li>The <code>map</code> field provided by the client is used to naively check the <code>maxFiles</code> option is not exceeded for a speedy <code>MaxFilesUploadError</code> error in middleware. The real number of files parsed is checked too, incase the request is malformed.</li>
<li>If files are missing from the request the <code>scalar Upload</code> promises reject with a <code>FileMissingUploadError</code> error.</li>
<li>Already if a file exceeds the <code>maxFileSize</code> option the file is truncated, the stream emits a <code>limit</code> event and <code>stream.truncated === true</code>. Now an <code>error</code> event is also emitted with a <code>MaxFileSizeUploadError</code>.</li>
<li>Aborting requests from the client causes <code>scalar Upload</code> promises to reject with a <code>UploadPromiseDisconnectUploadError</code> error for file upload streams that have not yet been parsed. For streams being parsed an <code>error</code> event is emitted with an <code>FileStreamDisconnectUploadError</code> error and <code>stream.truncated === true</code>. It is up to consumers to cleanup aborted streams in their resolvers.</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="4.0.0-alpha.1">
  <h2>
    <a href="#4.0.0-alpha.1" name="4.0.0-alpha.1" class="pilcrow"></a>
4.0.0-alpha.1
  </h2>
</div>
<ul>
<li>New API to support the <a href="https://github.com/jaydenseric/graphql-multipart-request-spec/releases/tag/v2.0.0-alpha.2">GraphQL multipart request spec v2.0.0-alpha.2</a>. Files no longer upload to the filesystem; <a href="https://nodejs.org/api/stream.html#stream_readable_streams">readable streams</a> are used in resolvers instead. Fixes <a href="https://github.com/jaydenseric/apollo-upload-server/issues/13">#13</a> via <a href="https://github.com/jaydenseric/apollo-upload-server/pull/22">#22</a>.</li>
<li>Export a new <code>Upload</code> scalar type to use in place of the old <code>Upload</code> input type. It represents a file upload promise that resolves an object containing <code>stream</code>, <code>filename</code>, <code>mimetype</code> and <code>encoding</code>.</li>
<li>Deprecated the <code>uploadDir</code> middleware option.</li>
<li>Added new <code>maxFieldSize</code>, <code>maxFileSize</code> and <code>maxFiles</code> middleware options.</li>
<li><code>graphql</code> is now a peer dependency.</li>
<li>Middleware are now arrow functions.</li>
</ul>
<div class="pilwrap" id="3.0.0">
  <h2>
    <a href="#3.0.0" name="3.0.0" class="pilcrow"></a>
3.0.0
  </h2>
</div>
<ul>
<li>Updated Node.js support from v6.4+ to v7.6+.</li>
<li>Using Babel directly, dropping Rollup.</li>
<li>New directory structure for compiled files.</li>
<li>Module files now have <code>.mjs</code> extension.</li>
<li>No longer publish the <code>src</code> directory.</li>
<li>No more sourcemaps.</li>
<li>Use an arrow function for the Koa middleware, to match the Express middleware.</li>
<li>Express middleware now passes on errors instead of blocking, via <a href="https://github.com/jaydenseric/apollo-upload-server/pull/20">#20</a>.</li>
<li>Compiled code is now prettier.</li>
<li>Prettier markdown files.</li>
<li>Updated package keywords.</li>
<li>Updated an Apollo documentation link in the changelog.</li>
<li>Readme improvements:
<ul>
<li>Added links to badges.</li>
<li>Removed the inspiration links; they are less relevant to the evolved codebase.</li>
<li>Fixed an Apollo link.</li>
<li>Replaced example resolver code with a link to the <a href="https://github.com/jaydenseric/apollo-upload-examples">Apollo upload examples</a>.</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="2.0.4">
  <h2>
    <a href="#2.0.4" name="2.0.4" class="pilcrow"></a>
2.0.4
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Readme tweaks including a new licence badge.</li>
</ul>
<div class="pilwrap" id="2.0.3">
  <h2>
    <a href="#2.0.3" name="2.0.3" class="pilcrow"></a>
2.0.3
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Removed <code>package-lock.json</code>. Lockfiles are <a href="https://github.com/sindresorhus/ama/issues/479#issuecomment-310661514">not recommended</a> for packages.</li>
<li>Moved Babel config out of <code>package.json</code> to prevent issues when consumers run Babel over <code>node_modules</code>.</li>
<li>Readme tweaks and fixes:
<ul>
<li>Renamed the <code>File</code> input type <code>Upload</code> for clarity.</li>
<li>Wording and formatting improvements.</li>
<li>Covered React Native.</li>
<li>Documented custom middleware.</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="2.0.2">
  <h2>
    <a href="#2.0.2" name="2.0.2" class="pilcrow"></a>
2.0.2
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Added a changelog.</li>
<li>Dropped Yarn in favor of npm@5. Removed <code>yarn.lock</code> and updated install instructions.</li>
<li>Set targeted Node version as a string for <code>babel-preset-env</code>.</li>
<li>New ESLint config. Dropped <a href="https://standardjs.com">Standard Style</a> and began using <a href="https://github.com/prettier/eslint-plugin-prettier">Prettier</a>.</li>
<li>Using <a href="https://github.com/okonet/lint-staged">lint-staged</a> to ensure contributors don't commit lint errors.</li>
<li>Removed <code>build:watch</code> script. Use <code>npm run build -- --watch</code> directly.</li>
</ul>
<div class="pilwrap" id="2.0.1">
  <h2>
    <a href="#2.0.1" name="2.0.1" class="pilcrow"></a>
2.0.1
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Support regular requests from clients other than apollo-upload-client again, fixing <a href="https://github.com/jaydenseric/apollo-upload-server/issues/4">#4</a>.</li>
<li>Removed incorrect commas from example GraphQL input type.</li>
</ul>
<div class="pilwrap" id="2.0.0">
  <h2>
    <a href="#2.0.0" name="2.0.0" class="pilcrow"></a>
2.0.0
  </h2>
</div>
<ul>
<li>Support <code>apollo-upload-client</code> v3 and <a href="https://apollographql.com/docs/apollo-server/requests.html#batching">query batching</a>.</li>
<li>Clearer package description.</li>
</ul>
<div class="pilwrap" id="1.1.0">
  <h2>
    <a href="#1.1.0" name="1.1.0" class="pilcrow"></a>
1.1.0
  </h2>
</div>
<ul>
<li>Updated dependencies.</li>
<li>Exporting a new helper function for processing requests. It can be used to create custom middleware, or middleware for unsupported routers.</li>
<li>Exporting new Koa middleware.</li>
<li>Upload directory is ensured on every request now. While slightly less efficient, it prevents major errors when if it is deleted while the server is running.</li>
<li>Documented npm install as well as Yarn.</li>
<li>Typo fix in the readme.</li>
</ul>
<div class="pilwrap" id="1.0.2">
  <h2>
    <a href="#1.0.2" name="1.0.2" class="pilcrow"></a>
1.0.2
  </h2>
</div>
<ul>
<li>Fixed broken Github deep links in the readme.</li>
<li>Readme rewording.</li>
<li>Simplified <code>package.json</code> description.</li>
</ul>
<div class="pilwrap" id="1.0.1">
  <h2>
    <a href="#1.0.1" name="1.0.1" class="pilcrow"></a>
1.0.1
  </h2>
</div>
<ul>
<li>Added missing metadata to <code>package.json</code>.</li>
<li>Added a link to apollographql/graphql-server in the readme.</li>
</ul>
<div class="pilwrap" id="1.0.0">
  <h2>
    <a href="#1.0.0" name="1.0.0" class="pilcrow"></a>
1.0.0
  </h2>
</div>
<ul>
<li>Initial release.</li>
</ul>
</div>
  </div>
</body>
</html>
