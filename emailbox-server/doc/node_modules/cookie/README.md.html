<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\cookie\\README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#cookie">cookie</a>
      </div>

      <div class="heading h2">
        <a href="#installation">Installation</a>
      </div>

      <div class="heading h2">
        <a href="#api">API</a>
      </div>

      <div class="heading h3">
        <a href="#cookie.parse-str-options">cookie.parse(str, options)</a>
      </div>

      <div class="heading h4">
        <a href="#options">Options</a>
      </div>

      <div class="heading h5">
        <a href="#decode">decode</a>
      </div>

      <div class="heading h3">
        <a href="#cookie.serialize-name-value-options">cookie.serialize(name, value, options)</a>
      </div>

      <div class="heading h4">
        <a href="#options-1">Options</a>
      </div>

      <div class="heading h5">
        <a href="#domain">domain</a>
      </div>

      <div class="heading h5">
        <a href="#encode">encode</a>
      </div>

      <div class="heading h5">
        <a href="#expires">expires</a>
      </div>

      <div class="heading h5">
        <a href="#httponly">httpOnly</a>
      </div>

      <div class="heading h5">
        <a href="#maxage">maxAge</a>
      </div>

      <div class="heading h5">
        <a href="#path">path</a>
      </div>

      <div class="heading h5">
        <a href="#samesite">sameSite</a>
      </div>

      <div class="heading h5">
        <a href="#secure">secure</a>
      </div>

      <div class="heading h2">
        <a href="#example">Example</a>
      </div>

      <div class="heading h2">
        <a href="#testing">Testing</a>
      </div>

      <div class="heading h2">
        <a href="#references">References</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="cookie">
  <h1>
    <a href="#cookie" name="cookie" class="pilcrow"></a>
cookie
  </h1>
</div>
<p><a href="https://npmjs.org/package/cookie"><img src="https://img.shields.io/npm/v/cookie.svg" alt="NPM Version"></a>
<a href="https://npmjs.org/package/cookie"><img src="https://img.shields.io/npm/dm/cookie.svg" alt="NPM Downloads"></a>
<a href="https://nodejs.org/en/download"><img src="https://img.shields.io/node/v/cookie.svg" alt="Node.js Version"></a>
<a href="https://travis-ci.org/jshttp/cookie"><img src="https://img.shields.io/travis/jshttp/cookie/master.svg" alt="Build Status"></a>
<a href="https://coveralls.io/r/jshttp/cookie?branch=master"><img src="https://img.shields.io/coveralls/jshttp/cookie/master.svg" alt="Test Coverage"></a></p>
<p>Basic HTTP cookie parser and serializer for HTTP servers.</p>
<div class="pilwrap" id="installation">
  <h2>
    <a href="#installation" name="installation" class="pilcrow"></a>
Installation
  </h2>
</div>
<pre><code class="sh">$ npm install cookie
</code></pre>
<div class="pilwrap" id="api">
  <h2>
    <a href="#api" name="api" class="pilcrow"></a>
API
  </h2>
</div>
<pre><code class="js"><span class="hljs-keyword">var</span> cookie = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cookie'</span>);
</code></pre>
<div class="pilwrap" id="cookie.parse-str-options">
  <h3>
    <a href="#cookie.parse-str-options" name="cookie.parse-str-options" class="pilcrow"></a>
cookie.parse(str, options)
  </h3>
</div>
<p>Parse an HTTP <code>Cookie</code> header string and returning an object of all cookie name-value pairs.
The <code>str</code> argument is the string representing a <code>Cookie</code> header value and <code>options</code> is an
optional object containing additional parsing options.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> cookies = cookie.parse(<span class="hljs-string">'foo=bar; equation=E%3Dmc%5E2'</span>);
<span class="hljs-comment">// { foo: 'bar', equation: 'E=mc^2' }</span>
</code></pre>
<div class="pilwrap" id="options">
  <h4>
    <a href="#options" name="options" class="pilcrow"></a>
Options
  </h4>
</div>
<p><code>cookie.parse</code> accepts these properties in the options object.</p>
<div class="pilwrap" id="decode">
  <h5>
    <a href="#decode" name="decode" class="pilcrow"></a>
decode
  </h5>
</div>
<p>Specifies a function that will be used to decode a cookie's value. Since the value of a cookie
has a limited character set (and must be a simple string), this function can be used to decode
a previously-encoded cookie value into a JavaScript string or other object.</p>
<p>The default function is the global <code>decodeURIComponent</code>, which will decode any URL-encoded
sequences into their byte representations.</p>
<p><strong>note</strong> if an error is thrown from this function, the original, non-decoded cookie value will
be returned as the cookie's value.</p>
<div class="pilwrap" id="cookie.serialize-name-value-options">
  <h3>
    <a href="#cookie.serialize-name-value-options" name="cookie.serialize-name-value-options" class="pilcrow"></a>
cookie.serialize(name, value, options)
  </h3>
</div>
<p>Serialize a cookie name-value pair into a <code>Set-Cookie</code> header string. The <code>name</code> argument is the
name for the cookie, the <code>value</code> argument is the value to set the cookie to, and the <code>options</code>
argument is an optional object containing additional serialization options.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> setCookie = cookie.serialize(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>);
<span class="hljs-comment">// foo=bar</span>
</code></pre>
<div class="pilwrap" id="options-1">
  <h4>
    <a href="#options-1" name="options-1" class="pilcrow"></a>
Options
  </h4>
</div>
<p><code>cookie.serialize</code> accepts these properties in the options object.</p>
<div class="pilwrap" id="domain">
  <h5>
    <a href="#domain" name="domain" class="pilcrow"></a>
domain
  </h5>
</div>
<p>Specifies the value for the <a href="https://tools.ietf.org/html/rfc6266#section-5.2.3"><code>Domain</code> <code>Set-Cookie</code> attribute</a>. By default, no
domain is set, and most clients will consider the cookie to apply to only the current domain.</p>
<div class="pilwrap" id="encode">
  <h5>
    <a href="#encode" name="encode" class="pilcrow"></a>
encode
  </h5>
</div>
<p>Specifies a function that will be used to encode a cookie's value. Since value of a cookie
has a limited character set (and must be a simple string), this function can be used to encode
a value into a string suited for a cookie's value.</p>
<p>The default function is the global <code>ecodeURIComponent</code>, which will encode a JavaScript string
into UTF-8 byte sequences and then URL-encode any that fall outside of the cookie range.</p>
<div class="pilwrap" id="expires">
  <h5>
    <a href="#expires" name="expires" class="pilcrow"></a>
expires
  </h5>
</div>
<p>Specifies the <code>Date</code> object to be the value for the <a href="https://tools.ietf.org/html/rfc6266#section-5.2.1"><code>Expires</code> <code>Set-Cookie</code> attribute</a>.
By default, no expiration is set, and most clients will consider this a &quot;non-persistent cookie&quot; and
will delete it on a condition like exiting a web browser application.</p>
<p><strong>note</strong> the <a href="https://tools.ietf.org/html/rfc6266#section-5.3">cookie storage model specification</a> states that if both <code>expires</code> and
<code>magAge</code> are set, then <code>maxAge</code> takes precedence, but it is possiblke not all clients by obey this,
so if both are set, they should point to the same date and time.</p>
<div class="pilwrap" id="httponly">
  <h5>
    <a href="#httponly" name="httponly" class="pilcrow"></a>
httpOnly
  </h5>
</div>
<p>Specifies the <code>boolean</code> value for the [<code>HttpOnly</code> <code>Set-Cookie</code> attribute][rfc-6266-5.2.6]. When truthy,
the <code>HttpOnly</code> attribute is set, otherwise it is not. By default, the <code>HttpOnly</code> attribute is not set.</p>
<p><strong>note</strong> be careful when setting this to <code>true</code>, as compliant clients will not allow client-side
JavaScript to see the cookie in <code>document.cookie</code>.</p>
<div class="pilwrap" id="maxage">
  <h5>
    <a href="#maxage" name="maxage" class="pilcrow"></a>
maxAge
  </h5>
</div>
<p>Specifies the <code>number</code> (in seconds) to be the value for the <a href="https://tools.ietf.org/html/rfc6266#section-5.2.2"><code>Max-Age</code> <code>Set-Cookie</code> attribute</a>.
The given number will be converted to an integer by rounding down. By default, no maximum age is set.</p>
<p><strong>note</strong> the <a href="https://tools.ietf.org/html/rfc6266#section-5.3">cookie storage model specification</a> states that if both <code>expires</code> and
<code>magAge</code> are set, then <code>maxAge</code> takes precedence, but it is possiblke not all clients by obey this,
so if both are set, they should point to the same date and time.</p>
<div class="pilwrap" id="path">
  <h5>
    <a href="#path" name="path" class="pilcrow"></a>
path
  </h5>
</div>
<p>Specifies the value for the <a href="https://tools.ietf.org/html/rfc6266#section-5.2.4"><code>Path</code> <code>Set-Cookie</code> attribute</a>. By default, the path
is considered the <a href="https://tools.ietf.org/html/rfc6266#section-5.1.4">&quot;default path&quot;</a>. By default, no maximum age is set, and most
clients will consider this a &quot;non-persistent cookie&quot; and will delete it on a condition like exiting
a web browser application.</p>
<div class="pilwrap" id="samesite">
  <h5>
    <a href="#samesite" name="samesite" class="pilcrow"></a>
sameSite
  </h5>
</div>
<p>Specifies the <code>boolean</code> or <code>string</code> to be the value for the <a href="https://tools.ietf.org/html/draft-west-first-party-cookies-07"><code>SameSite</code> <code>Set-Cookie</code> attribute</a>.</p>
<ul>
<li><code>true</code> will set the <code>SameSite</code> attribute to <code>Strict</code> for strict same site enforcement.</li>
<li><code>false</code> will not set the <code>SameSite</code> attribute.</li>
<li><code>'lax'</code> will set the <code>SameSite</code> attribute to <code>Lax</code> for lax same site enforcement.</li>
<li><code>'strict'</code> will set the <code>SameSite</code> attribute to <code>Strict</code> for strict same site enforcement.</li>
</ul>
<p>More information about the different enforcement levels can be found in the specification
https://tools.ietf.org/html/draft-west-first-party-cookies-07#section-4.1.1</p>
<p><strong>note</strong> This is an attribute that has not yet been fully standardized, and may change in the future.
This also means many clients may ignore this attribute until they understand it.</p>
<div class="pilwrap" id="secure">
  <h5>
    <a href="#secure" name="secure" class="pilcrow"></a>
secure
  </h5>
</div>
<p>Specifies the <code>boolean</code> value for the [<code>Secure</code> <code>Set-Cookie</code> attribute][rfc-6266-5.2.5]. When truthy,
the <code>Secure</code> attribute is set, otherwise it is not. By default, the <code>Secure</code> attribute is not set.</p>
<p><strong>note</strong> be careful when setting this to <code>true</code>, as compliant clients will not send the cookie back to
the server in the future if the browser does not have an HTTPS connection.</p>
<div class="pilwrap" id="example">
  <h2>
    <a href="#example" name="example" class="pilcrow"></a>
Example
  </h2>
</div>
<p>The following example uses this module in conjunction with the Node.js core HTTP server
to prompt a user for their name and display it back on future visits.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> cookie = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cookie'</span>);
<span class="hljs-keyword">var</span> escapeHtml = <span class="hljs-built_in">require</span>(<span class="hljs-string">'escape-html'</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">var</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onRequest</span>(<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-comment">// Parse the query string</span>
  <span class="hljs-keyword">var</span> query = url.parse(req.url, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>).query;

  <span class="hljs-keyword">if</span> (query &amp;&amp; query.name) {
    <span class="hljs-comment">// Set a new cookie with the name</span>
    res.setHeader(<span class="hljs-string">'Set-Cookie'</span>, cookie.serialize(<span class="hljs-string">'name'</span>, <span class="hljs-built_in">String</span>(query.name), {
      <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxAge</span>: <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span> * <span class="hljs-number">7</span> <span class="hljs-comment">// 1 week</span>
    }));

    <span class="hljs-comment">// Redirect back after setting cookie</span>
    res.statusCode = <span class="hljs-number">302</span>;
    res.setHeader(<span class="hljs-string">'Location'</span>, req.headers.referer || <span class="hljs-string">'/'</span>);
    res.end();
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// Parse the cookies on the request</span>
  <span class="hljs-keyword">var</span> cookies = cookie.parse(req.headers.cookie || <span class="hljs-string">''</span>);

  <span class="hljs-comment">// Get the visitor name set in the cookie</span>
  <span class="hljs-keyword">var</span> name = cookies.name;

  res.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/html; charset=UTF-8'</span>);

  <span class="hljs-keyword">if</span> (name) {
    res.write(<span class="hljs-string">'&lt;p&gt;Welcome back, &lt;b&gt;'</span> + escapeHtml(name) + <span class="hljs-string">'&lt;/b&gt;!&lt;/p&gt;'</span>);
  } <span class="hljs-keyword">else</span> {
    res.write(<span class="hljs-string">'&lt;p&gt;Hello, new visitor!&lt;/p&gt;'</span>);
  }

  res.write(<span class="hljs-string">'&lt;form method="GET"&gt;'</span>);
  res.write(<span class="hljs-string">'&lt;input placeholder="enter your name" name="name"&gt; &lt;input type="submit" value="Set Name"&gt;'</span>);
  res.end(<span class="hljs-string">'&lt;/form'</span>);
}

http.createServer(onRequest).listen(<span class="hljs-number">3000</span>);
</code></pre>
<div class="pilwrap" id="testing">
  <h2>
    <a href="#testing" name="testing" class="pilcrow"></a>
Testing
  </h2>
</div>
<pre><code class="sh">$ npm <span class="hljs-built_in">test</span>
</code></pre>
<div class="pilwrap" id="references">
  <h2>
    <a href="#references" name="references" class="pilcrow"></a>
References
  </h2>
</div>
<ul>
<li><a href="https://tools.ietf.org/html/rfc6266">RFC 6266: HTTP State Management Mechanism</a></li>
<li><a href="https://tools.ietf.org/html/draft-west-first-party-cookies-07">Same-site Cookies</a></li>
</ul>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p><a href="LICENSE.html">MIT</a></p>
</div>
  </div>
</body>
</html>
