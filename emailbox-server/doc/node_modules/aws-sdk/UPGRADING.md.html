<!DOCTYPE html>
<html>
<head>
  <title>UPGRADING.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\aws-sdk\\UPGRADING.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#@title-upgrading-notes-1.x-to-2.0">@!title Upgrading Notes (1.x to 2.0)</a>
      </div>

      <div class="heading h1">
        <a href="#upgrading-notes-1.x-to-2.0">Upgrading Notes (1.x to 2.0)</a>
      </div>

      <div class="heading h2">
        <a href="#1.automatic-conversion-of-base64-and-timestamp-types-on-inputoutput">1. Automatic Conversion of Base64 and Timestamp Types on Input/Output</a>
      </div>

      <div class="heading h2">
        <a href="#2.moved-response.data.requestid-to-response.requestid">2. Moved response.data.RequestId to response.requestId</a>
      </div>

      <div class="heading h2">
        <a href="#3.exposed-wrapper-elements">3. Exposed Wrapper Elements</a>
      </div>

      <div class="heading h2">
        <a href="#4.dropped.client-and.client-properties">4. Dropped .Client and .client Properties</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="@title-upgrading-notes-1.x-to-2.0">
  <h1>
    <a href="#@title-upgrading-notes-1.x-to-2.0" name="@title-upgrading-notes-1.x-to-2.0" class="pilcrow"></a>
@!title Upgrading Notes (1.x to 2.0)
  </h1>
</div>
<div class="pilwrap" id="upgrading-notes-1.x-to-2.0">
  <h1>
    <a href="#upgrading-notes-1.x-to-2.0" name="upgrading-notes-1.x-to-2.0" class="pilcrow"></a>
Upgrading Notes (1.x to 2.0)
  </h1>
</div>
<p>This document captures breaking changes from 1.x versions to the first
stable 2.x (non-RC) release of the AWS SDK for JavaScript.</p>
<div class="pilwrap" id="1.automatic-conversion-of-base64-and-timestamp-types-on-inputoutput">
  <h2>
    <a href="#1.automatic-conversion-of-base64-and-timestamp-types-on-inputoutput" name="1.automatic-conversion-of-base64-and-timestamp-types-on-inputoutput" class="pilcrow"></a>
1. Automatic Conversion of Base64 and Timestamp Types on Input/Output
  </h2>
</div>
<p>The SDK will now automatically encode and decode base64-encoded values, as well
as timestamp values, on the user's behalf. This change affects any operation
where Base64 or Timestamp values were sent by a request or returned in a
response, i.e., <code>AWS.DynamoDB</code> and <code>AWS.SQS</code>, which allow for Base64
encoded values.</p>
<p>User code that previously did base64 conversion no longer requires this.
Furthermore, values encoded as base64 are now returned as Buffer objects
from server responses (and can also be passed as Buffer input). For
example, the following 1.x <code>SQS.sendMessage()</code> parameters:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> params = {
  <span class="hljs-attr">MessageBody</span>: <span class="hljs-string">'Some Message'</span>,
  <span class="hljs-attr">MessageAttributes</span>: {
    <span class="hljs-attr">attrName</span>: {
      <span class="hljs-attr">DataType</span>: <span class="hljs-string">'Binary'</span>,
      <span class="hljs-attr">BinaryValue</span>: <span class="hljs-keyword">new</span> Buffer(<span class="hljs-string">'example text'</span>).toString(<span class="hljs-string">'base64'</span>)
    }
  }
};
</code></pre>
<p>Can be rewritten as:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> params = {
  <span class="hljs-attr">MessageBody</span>: <span class="hljs-string">'Some Message'</span>,
  <span class="hljs-attr">MessageAttributes</span>: {
    <span class="hljs-attr">attrName</span>: {
      <span class="hljs-attr">DataType</span>: <span class="hljs-string">'Binary'</span>,
      <span class="hljs-attr">BinaryValue</span>: <span class="hljs-string">'example text'</span>
    }
  }
};
</code></pre>
<p>And the message will be read as:</p>
<pre><code class="javascript">sqs.receiveMessage(params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
  <span class="hljs-comment">// buf is &lt;Buffer 65 78 61 6d 70 6c 65 20 74 65 78 74&gt;</span>
  <span class="hljs-keyword">var</span> buf = data.Messages[<span class="hljs-number">0</span>].MessageAttributes.attrName.BinaryValue;
  <span class="hljs-built_in">console</span>.log(buf.toString()); <span class="hljs-comment">// "example text"</span>
});
</code></pre>
<div class="pilwrap" id="2.moved-response.data.requestid-to-response.requestid">
  <h2>
    <a href="#2.moved-response.data.requestid-to-response.requestid" name="2.moved-response.data.requestid-to-response.requestid" class="pilcrow"></a>
2. Moved response.data.RequestId to response.requestId
  </h2>
</div>
<p>The SDK now stores request IDs for all services in a consistent place on the
response object, rather than inside the response.data property. This is to
improve consistency across services that expose request IDs in different ways.
Note that this is also a breaking change that renames the
<code>response.data.RequestId</code> property to <code>response.requestId</code>
(or <code>this.requestId</code> inside of a callback).</p>
<p>To migrate your code, change:</p>
<pre><code class="javascript">svc.operation(params, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Request ID:'</span>, data.RequestId);
});
</code></pre>
<p>To the following:</p>
<pre><code class="javascript">svc.operation(params, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Request ID:'</span>, <span class="hljs-keyword">this</span>.requestId);
});
</code></pre>
<div class="pilwrap" id="3.exposed-wrapper-elements">
  <h2>
    <a href="#3.exposed-wrapper-elements" name="3.exposed-wrapper-elements" class="pilcrow"></a>
3. Exposed Wrapper Elements
  </h2>
</div>
<p>If you use {AWS.ElastiCache}, {AWS.RDS}, or {AWS.Redshift}, you must now access
the response through the top-level output property in the response for certain
operations. This change corrects the SDK to behave according to documentation
output, which was previously listing this wrapper element.</p>
<p>Example:</p>
<p><code>RDS.describeEngineDefaultParameters()</code> used to return:</p>
<pre><code class="javascript">{ <span class="hljs-attr">Parameters</span>: [ ... ] }
</code></pre>
<p>This operation now returns:</p>
<pre><code class="javascript">{ <span class="hljs-attr">EngineDefaults</span>: { <span class="hljs-attr">Parameters</span>: [ ... ] } }
</code></pre>
<p>The full list of affected operations for each service are:</p>
<p><strong>AWS.ElastiCache</strong>: authorizeCacheSecurityGroupIngress, createCacheCluster,
createCacheParameterGroup, createCacheSecurityGroup, createCacheSubnetGroup,
createReplicationGroup, deleteCacheCluster, deleteReplicationGroup,
describeEngineDefaultParameters, modifyCacheCluster, modifyCacheSubnetGroup,
modifyReplicationGroup, purchaseReservedCacheNodesOffering, rebootCacheCluster,
revokeCacheSecurityGroupIngress</p>
<p><strong>AWS.RDS</strong>: addSourceIdentifierToSubscription, authorizeDBSecurityGroupIngress,
copyDBSnapshot, createDBInstance, createDBInstanceReadReplica,
createDBParameterGroup, createDBSecurityGroup, createDBSnapshot,
createDBSubnetGroup, createEventSubscription, createOptionGroup,
deleteDBInstance, deleteDBSnapshot, deleteEventSubscription,
describeEngineDefaultParameters, modifyDBInstance, modifyDBSubnetGroup,
modifyEventSubscription, modifyOptionGroup, promoteReadReplica,
purchaseReservedDBInstancesOffering, rebootDBInstance,
removeSourceIdentifierFromSubscription, restoreDBInstanceFromDBSnapshot,
restoreDBInstanceToPointInTime, revokeDBSecurityGroupIngress</p>
<p><strong>AWS.Redshift</strong>: authorizeClusterSecurityGroupIngress, authorizeSnapshotAccess,
copyClusterSnapshot, createCluster, createClusterParameterGroup,
createClusterSecurityGroup, createClusterSnapshot, createClusterSubnetGroup,
createEventSubscription, createHsmClientCertificate, createHsmConfiguration,
deleteCluster, deleteClusterSnapshot, describeDefaultClusterParameters,
disableSnapshotCopy, enableSnapshotCopy, modifyCluster,
modifyClusterSubnetGroup, modifyEventSubscription,
modifySnapshotCopyRetentionPeriod, purchaseReservedNodeOffering, rebootCluster,
restoreFromClusterSnapshot, revokeClusterSecurityGroupIngress,
revokeSnapshotAccess, rotateEncryptionKey</p>
<div class="pilwrap" id="4.dropped.client-and.client-properties">
  <h2>
    <a href="#4.dropped.client-and.client-properties" name="4.dropped.client-and.client-properties" class="pilcrow"></a>
4. Dropped <code>.Client</code> and <code>.client</code> Properties
  </h2>
</div>
<p>The <code>.Client</code> and <code>.client</code> properties have been removed from Service objects.
If you are using the <code>.Client</code> property on a Service class or a <code>.client</code>
property on an instance of the service, remove these properties from your code.</p>
<p>Upgrading example:</p>
<p>The following 1.x code:</p>
<pre><code>var sts = new AWS.STS.Client();
// or
var sts = new AWS.STS();

sts.client.operation(...);
</code></pre>
<p>Should be changed to the following:</p>
<pre><code>var sts = new AWS.STS();
sts.operation(...)
</code></pre>
</div>
  </div>
</body>
</html>
