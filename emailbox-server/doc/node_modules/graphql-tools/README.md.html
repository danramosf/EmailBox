<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\graphql-tools\\README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#graphql-tools-generate-and-mock-graphql.js-schemas">GraphQL-tools: generate and mock GraphQL.js schemas</a>
      </div>

      <div class="heading h2">
        <a href="#documentation">Documentation</a>
      </div>

      <div class="heading h2">
        <a href="#binding-to-http">Binding to HTTP</a>
      </div>

      <div class="heading h2">
        <a href="#example">Example</a>
      </div>

      <div class="heading h2">
        <a href="#contributions">Contributions</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="graphql-tools-generate-and-mock-graphql.js-schemas">
  <h1>
    <a href="#graphql-tools-generate-and-mock-graphql.js-schemas" name="graphql-tools-generate-and-mock-graphql.js-schemas" class="pilcrow"></a>
GraphQL-tools: generate and mock GraphQL.js schemas
  </h1>
</div>
<p><a href="https://badge.fury.io/js/graphql-tools"><img src="https://badge.fury.io/js/graphql-tools.svg" alt="npm version"></a>
<a href="https://travis-ci.org/apollographql/graphql-tools"><img src="https://travis-ci.org/apollographql/graphql-tools.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/apollographql/graphql-tools?branch=master"><img src="https://coveralls.io/repos/github/apollographql/graphql-tools/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="http://www.apollostack.com/#slack"><img src="https://img.shields.io/badge/slack-join-orange.svg" alt="Get on Slack"></a></p>
<p>This package provides a few useful ways to create a GraphQL schema:</p>
<ol>
<li>Use the GraphQL schema language to <a href="https://www.apollographql.com/docs/graphql-tools/generate-schema.html">generate a schema</a> with full support for resolvers, interfaces, unions, and custom scalars. The schema produced is completely compatible with <a href="https://github.com/graphql/graphql-js">GraphQL.js</a>.</li>
<li><a href="https://www.apollographql.com/docs/graphql-tools/mocking.html">Mock your GraphQL API</a> with fine-grained per-type mocking</li>
<li>Automatically <a href="https://www.apollographql.com/docs/graphql-tools/schema-stitching.html">stitch multiple schemas together</a> into one larger API</li>
</ol>
<div class="pilwrap" id="documentation">
  <h2>
    <a href="#documentation" name="documentation" class="pilcrow"></a>
Documentation
  </h2>
</div>
<p><a href="https://www.apollographql.com/docs/graphql-tools/">Read the docs.</a></p>
<div class="pilwrap" id="binding-to-http">
  <h2>
    <a href="#binding-to-http" name="binding-to-http" class="pilcrow"></a>
Binding to HTTP
  </h2>
</div>
<p>If you want to bind your JavaScript GraphQL schema to an HTTP server, we recommend using <a href="https://github.com/apollographql/apollo-server/">Apollo Server</a>, which supports every popular Node HTTP server library including Express, Koa, Hapi, and more.</p>
<p>JavaScript GraphQL servers are often developed with <code>graphql-tools</code> and <code>apollo-server-express</code> together: One to write the schema and resolver code, and the other to connect it to a web server.</p>
<div class="pilwrap" id="example">
  <h2>
    <a href="#example" name="example" class="pilcrow"></a>
Example
  </h2>
</div>
<p><a href="https://launchpad.graphql.com/1jzxrj179">See and edit the live example on Launchpad.</a></p>
<p>When using <code>graphql-tools</code>, you describe the schema as a GraphQL type language string:</p>
<pre><code class="js">
<span class="hljs-keyword">const</span> typeDefs = <span class="hljs-string">`
type Author {
  id: ID! # the ! means that every author object _must_ have an id
  firstName: String
  lastName: String
  """
  the list of Posts by this author
  """
  posts: [Post]
}

type Post {
  id: ID!
  title: String
  author: Author
  votes: Int
}

# the schema allows the following query:
type Query {
  posts: [Post]
}

# this schema allows the following mutation:
type Mutation {
  upvotePost (
    postId: ID!
  ): Post
}

# we need to tell the server which types represent the root query
# and root mutation types. We call them RootQuery and RootMutation by convention.
schema {
  query: Query
  mutation: Mutation
}
`</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> typeDefs;
</code></pre>
<p>Then you define resolvers as a nested object that maps type and field names to resolver functions:</p>
<pre><code class="js"><span class="hljs-keyword">const</span> resolvers = {
  <span class="hljs-attr">Query</span>: {
    posts() {
      <span class="hljs-keyword">return</span> posts;
    },
  },
  <span class="hljs-attr">Mutation</span>: {
    upvotePost(_, { postId }) {
      <span class="hljs-keyword">const</span> post = find(posts, { <span class="hljs-attr">id</span>: postId });
      <span class="hljs-keyword">if</span> (!post) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Couldn't find post with id <span class="hljs-subst">${postId}</span>`</span>);
      }
      post.votes += <span class="hljs-number">1</span>;
      <span class="hljs-keyword">return</span> post;
    },
  },
  <span class="hljs-attr">Author</span>: {
    posts(author) {
      <span class="hljs-keyword">return</span> filter(posts, { <span class="hljs-attr">authorId</span>: author.id });
    },
  },
  <span class="hljs-attr">Post</span>: {
    author(post) {
      <span class="hljs-keyword">return</span> find(authors, { <span class="hljs-attr">id</span>: post.authorId });
    },
  },
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> resolvers;
</code></pre>
<p>At the end, the schema and resolvers are combined using <code>makeExecutableSchema</code>:</p>
<pre><code class="js"><span class="hljs-keyword">import</span> { makeExecutableSchema } <span class="hljs-keyword">from</span> <span class="hljs-string">'graphql-tools'</span>;

<span class="hljs-keyword">const</span> executableSchema = makeExecutableSchema({
  typeDefs,
  resolvers,
});
</code></pre>
<p>This example has the entire type definition in one string and all resolvers in one file, but you can combine types and resolvers from multiple files and objects, as documented in the <a href="https://www.apollographql.com/docs/graphql-tools/generate-schema.html#modularizing">modularizing the schema</a> section of the docs.</p>
<div class="pilwrap" id="contributions">
  <h2>
    <a href="#contributions" name="contributions" class="pilcrow"></a>
Contributions
  </h2>
</div>
<p>Contributions, issues and feature requests are very welcome. If you are using this package and fixed a bug for yourself, please consider submitting a PR!</p>
</div>
  </div>
</body>
</html>
