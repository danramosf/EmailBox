<!DOCTYPE html>
<html>
<head>
  <title>README.markdown</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\require-directory\\README.markdown";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#require-directory">require-directory</a>
      </div>

      <div class="heading h2">
        <a href="#how-to-use">How To Use</a>
      </div>

      <div class="heading h3">
        <a href="#installation-via-npm">Installation (via npm)</a>
      </div>

      <div class="heading h3">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h3">
        <a href="#specifying-another-directory">Specifying Another Directory</a>
      </div>

      <div class="heading h2">
        <a href="#options">Options</a>
      </div>

      <div class="heading h3">
        <a href="#whitelisting">Whitelisting</a>
      </div>

      <div class="heading h3">
        <a href="#blacklisting">Blacklisting</a>
      </div>

      <div class="heading h3">
        <a href="#visiting-objects-as-theyre-loaded">Visiting Objects As They&#39;re Loaded</a>
      </div>

      <div class="heading h3">
        <a href="#renaming-keys">Renaming Keys</a>
      </div>

      <div class="heading h3">
        <a href="#no-recursion">No Recursion</a>
      </div>

      <div class="heading h2">
        <a href="#run-unit-tests">Run Unit Tests</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

      <div class="heading h2">
        <a href="#author">Author</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="require-directory">
  <h1>
    <a href="#require-directory" name="require-directory" class="pilcrow"></a>
require-directory
  </h1>
</div>
<p>Recursively iterates over specified directory, <code>require()</code>'ing each file, and returning a nested hash structure containing those modules.</p>
<p><strong><a href="https://twitter.com/intent/user?screen_name=troygoode">Follow me (@troygoode) on Twitter!</a></strong></p>
<p><a href="https://nodei.co/npm/require-directory/"><img src="https://nodei.co/npm/require-directory.png?downloads=true&amp;stars=true" alt="NPM"></a></p>
<p><a href="http://travis-ci.org/troygoode/node-require-directory"><img src="https://secure.travis-ci.org/troygoode/node-require-directory.png" alt="build status"></a></p>
<div class="pilwrap" id="how-to-use">
  <h2>
    <a href="#how-to-use" name="how-to-use" class="pilcrow"></a>
How To Use
  </h2>
</div>
<div class="pilwrap" id="installation-via-npm">
  <h3>
    <a href="#installation-via-npm" name="installation-via-npm" class="pilcrow"></a>
Installation (via <a href="https://npmjs.org/package/require-directory">npm</a>)
  </h3>
</div>
<pre><code class="bash">$ npm install require-directory
</code></pre>
<div class="pilwrap" id="usage">
  <h3>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h3>
</div>
<p>A common pattern in node.js is to include an index file which creates a hash of the files in its current directory. Given a directory structure like so:</p>
<ul>
<li>app.js</li>
<li>routes/
<ul>
<li>index.js</li>
<li>home.js</li>
<li>auth/
<ul>
<li>login.js</li>
<li>logout.js</li>
<li>register.js</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code>routes/index.js</code> uses <code>require-directory</code> to build the hash (rather than doing so manually) like so:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>);
<span class="hljs-built_in">module</span>.exports = requireDirectory(<span class="hljs-built_in">module</span>);
</code></pre>
<p><code>app.js</code> references <code>routes/index.js</code> like any other module, but it now has a hash/tree of the exports from the <code>./routes/</code> directory:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> routes = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./routes'</span>);

<span class="hljs-comment">// snip</span>

app.get(<span class="hljs-string">'/'</span>, routes.home);
app.get(<span class="hljs-string">'/register'</span>, routes.auth.register);
app.get(<span class="hljs-string">'/login'</span>, routes.auth.login);
app.get(<span class="hljs-string">'/logout'</span>, routes.auth.logout);
</code></pre>
<p>The <code>routes</code> variable above is the equivalent of this:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> routes = {
  <span class="hljs-attr">home</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'routes/home.js'</span>),
  <span class="hljs-attr">auth</span>: {
    <span class="hljs-attr">login</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'routes/auth/login.js'</span>),
    <span class="hljs-attr">logout</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'routes/auth/logout.js'</span>),
    <span class="hljs-attr">register</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'routes/auth/register.js'</span>)
  }
};
</code></pre>
<p><em>Note that <code>routes.index</code> will be <code>undefined</code> as you would hope.</em></p>
<div class="pilwrap" id="specifying-another-directory">
  <h3>
    <a href="#specifying-another-directory" name="specifying-another-directory" class="pilcrow"></a>
Specifying Another Directory
  </h3>
</div>
<p>You can specify which directory you want to build a tree of (if it isn't the current directory for whatever reason) by passing it as the second parameter. Not specifying the path (<code>requireDirectory(module)</code>) is the equivelant of <code>requireDirectory(module, __dirname)</code>:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>);
<span class="hljs-built_in">module</span>.exports = requireDirectory(<span class="hljs-built_in">module</span>, <span class="hljs-string">'./some/subdirectory'</span>);
</code></pre>
<p>For example, in the <a href="#usage.html">example in the Usage section</a> we could have avoided creating <code>routes/index.js</code> and instead changed the first lines of <code>app.js</code> to:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>);
<span class="hljs-keyword">var</span> routes = requireDirectory(<span class="hljs-built_in">module</span>, <span class="hljs-string">'./routes'</span>);
</code></pre>
<div class="pilwrap" id="options">
  <h2>
    <a href="#options" name="options" class="pilcrow"></a>
Options
  </h2>
</div>
<p>You can pass an options hash to <code>require-directory</code> as the 2nd parameter (or 3rd if you're passing the path to another directory as the 2nd parameter already). Here are the available options:</p>
<div class="pilwrap" id="whitelisting">
  <h3>
    <a href="#whitelisting" name="whitelisting" class="pilcrow"></a>
Whitelisting
  </h3>
</div>
<p>Whitelisting (either via RegExp or function) allows you to specify that only certain files be loaded.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  whitelist = <span class="hljs-regexp">/onlyinclude.js$/</span>,
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">include</span>: whitelist});
</code></pre>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  check = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path</span>)</span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/onlyinclude.js$/</span>.test(path)){
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// don't include</span>
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// go ahead and include</span>
    }
  },
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">include</span>: check});
</code></pre>
<div class="pilwrap" id="blacklisting">
  <h3>
    <a href="#blacklisting" name="blacklisting" class="pilcrow"></a>
Blacklisting
  </h3>
</div>
<p>Blacklisting (either via RegExp or function) allows you to specify that all but certain files should be loaded.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  blacklist = <span class="hljs-regexp">/dontinclude\.js$/</span>,
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">exclude</span>: blacklist});
</code></pre>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  check = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path</span>)</span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/dontinclude\.js$/</span>.test(path)){
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// don't include</span>
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// go ahead and include</span>
    }
  },
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">exclude</span>: check});
</code></pre>
<div class="pilwrap" id="visiting-objects-as-theyre-loaded">
  <h3>
    <a href="#visiting-objects-as-theyre-loaded" name="visiting-objects-as-theyre-loaded" class="pilcrow"></a>
Visiting Objects As They're Loaded
  </h3>
</div>
<p><code>require-directory</code> takes a function as the <code>visit</code> option that will be called for each module that is added to module.exports.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  visitor = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-built_in">console</span>.log(obj); <span class="hljs-comment">// will be called for every module that is loaded</span>
  },
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">visit</span>: visitor});
</code></pre>
<p>The visitor can also transform the objects by returning a value:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  visitor = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">return</span> obj(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
  },
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">visit</span>: visitor});
</code></pre>
<div class="pilwrap" id="renaming-keys">
  <h3>
    <a href="#renaming-keys" name="renaming-keys" class="pilcrow"></a>
Renaming Keys
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  renamer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> name.toUpperCase();
  },
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">rename</span>: renamer});
</code></pre>
<div class="pilwrap" id="no-recursion">
  <h3>
    <a href="#no-recursion" name="no-recursion" class="pilcrow"></a>
No Recursion
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-keyword">var</span> requireDirectory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'require-directory'</span>),
  hash = requireDirectory(<span class="hljs-built_in">module</span>, {<span class="hljs-attr">recurse</span>: <span class="hljs-literal">false</span>});
</code></pre>
<div class="pilwrap" id="run-unit-tests">
  <h2>
    <a href="#run-unit-tests" name="run-unit-tests" class="pilcrow"></a>
Run Unit Tests
  </h2>
</div>
<pre><code class="bash">$ npm run lint
$ npm <span class="hljs-built_in">test</span>
</code></pre>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p><a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a></p>
<div class="pilwrap" id="author">
  <h2>
    <a href="#author" name="author" class="pilcrow"></a>
Author
  </h2>
</div>
<p><a href="https://github.com/TroyGoode">Troy Goode</a> (<a href="mailto:troygoode@gmail.com.html">troygoode@gmail.com</a>)</p>
</div>
  </div>
</body>
</html>
