<!DOCTYPE html>
<html>
<head>
  <title>test.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\object-path-immutable\\test.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>test.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-comment">/* globals describe, it */</span>
<span class="hljs-meta">
'use strict'</span>

<span class="hljs-keyword">var</span> expect = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chai'</span>).expect
<span class="hljs-keyword">var</span> op = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./index.js'</span>)

describe(<span class="hljs-string">'set'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  it(<span class="hljs-string">'should set a deep key without modifying the original object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>
      },
      <span class="hljs-attr">c</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">2</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.set(obj, <span class="hljs-string">'a.b'</span>, <span class="hljs-number">3</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(obj.a).to.be.eql({<span class="hljs-attr">b</span>: <span class="hljs-number">1</span>})
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>this should be the same</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a.b).to.be.equal(<span class="hljs-number">3</span>)
  })

  it(<span class="hljs-string">'should set a deep array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">b</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
      },
      <span class="hljs-attr">c</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">2</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.set(obj, <span class="hljs-string">'a.b.1'</span>, <span class="hljs-number">4</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.a.b).not.to.be.equal(obj.a.b)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a.b).to.be.eql([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>])
  })

  it(<span class="hljs-string">'should create intermediate objects and array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {},
      <span class="hljs-attr">c</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">2</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.set(obj, <span class="hljs-string">'a.b.1.f'</span>, <span class="hljs-string">'a'</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(obj.a).to.be.eql({})
    expect(newObj.a).to.be.eql({<span class="hljs-attr">b</span>: [, {<span class="hljs-attr">f</span>: <span class="hljs-string">'a'</span>}]}) <span class="hljs-comment">// eslint-disable-line no-sparse-arrays</span>
  })

  it(<span class="hljs-string">'should return the input value if passed an empty path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {}

    expect(op.set(obj, <span class="hljs-string">''</span>, <span class="hljs-string">'yo'</span>)).to.be.equal(<span class="hljs-string">'yo'</span>)
  })

  it(<span class="hljs-string">'should set at a numeric path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    expect(op.set([], <span class="hljs-number">0</span>, <span class="hljs-string">'yo'</span>)).to.deep.equal([<span class="hljs-string">'yo'</span>])
  })
})

describe(<span class="hljs-string">'update'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  it(<span class="hljs-string">'should update a deep key'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>
      },
      <span class="hljs-attr">c</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">2</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.update(obj, <span class="hljs-string">'a.b'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
      <span class="hljs-keyword">return</span> value + <span class="hljs-number">1</span>
    })

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(obj.a).to.be.eql({<span class="hljs-attr">b</span>: <span class="hljs-number">1</span>})
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>this should be the same</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a.b).to.be.equal(<span class="hljs-number">2</span>)
  })

  it(<span class="hljs-string">'should work on empty path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>
      },
      <span class="hljs-attr">c</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">2</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.update(obj, [], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
      value.e = <span class="hljs-number">3</span>
      <span class="hljs-keyword">return</span> value
    })

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).to.be.equal(obj.a)
    expect(obj.a).to.be.eql({<span class="hljs-attr">b</span>: <span class="hljs-number">1</span>})
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>this should be the same</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    expect(newObj.c).to.be.equal(obj.c)
    expect(newObj.a.b).to.be.equal(<span class="hljs-number">1</span>)
    expect(newObj.e).to.be.equal(<span class="hljs-number">3</span>)
  })
})

describe(<span class="hljs-string">'insert'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  it(<span class="hljs-string">'should insert value into existing array without modifying the object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: [<span class="hljs-string">'a'</span>],
      <span class="hljs-attr">c</span>: {}
    }

    <span class="hljs-keyword">var</span> newObj = op.insert(obj, <span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-number">0</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a).to.be.eql([<span class="hljs-string">'b'</span>, <span class="hljs-string">'a'</span>])
  })

  it(<span class="hljs-string">'should create intermediary array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: [],
      <span class="hljs-attr">c</span>: {}
    }

    <span class="hljs-keyword">var</span> newObj = op.insert(obj, <span class="hljs-string">'a.0.1'</span>, <span class="hljs-string">'b'</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a).to.be.eql([[, [<span class="hljs-string">'b'</span>]]]) <span class="hljs-comment">// eslint-disable-line no-sparse-arrays</span>
  })

  it(<span class="hljs-string">'should insert in another index'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: <span class="hljs-string">'b'</span>,
      <span class="hljs-attr">b</span>: {
        <span class="hljs-attr">c</span>: [],
        <span class="hljs-attr">d</span>: [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>],
        <span class="hljs-attr">e</span>: [{}, {<span class="hljs-attr">f</span>: <span class="hljs-string">'g'</span>}],
        <span class="hljs-attr">f</span>: <span class="hljs-string">'i'</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.insert(obj, <span class="hljs-string">'b.d'</span>, <span class="hljs-string">'asdf'</span>, <span class="hljs-number">1</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.b.d).to.be.eql([<span class="hljs-string">'a'</span>, <span class="hljs-string">'asdf'</span>, <span class="hljs-string">'b'</span>])
  })

  it(<span class="hljs-string">'should handle sparse array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: <span class="hljs-string">'b'</span>,
      <span class="hljs-attr">b</span>: {
        <span class="hljs-attr">c</span>: [],
        <span class="hljs-attr">d</span>: [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>],
        <span class="hljs-attr">e</span>: [{}, {<span class="hljs-attr">f</span>: <span class="hljs-string">'g'</span>}],
        <span class="hljs-attr">f</span>: <span class="hljs-string">'i'</span>
      }
    }
    obj.b.d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">4</span>)
    obj.b.d[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span>
    obj.b.d[<span class="hljs-number">1</span>] = <span class="hljs-string">'b'</span>

    <span class="hljs-keyword">var</span> newObj = op.insert(obj, <span class="hljs-string">'b.d'</span>, <span class="hljs-string">'asdf'</span>, <span class="hljs-number">3</span>)
    expect(newObj).not.to.be.equal(obj)
    expect(newObj.b.d).to.be.eql([<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, , <span class="hljs-string">'asdf'</span>]) <span class="hljs-comment">// eslint-disable-line no-sparse-arrays</span>
  })

  it(<span class="hljs-string">'should throw if asked to insert into something other than an array'</span>,
    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        op.insert({<span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>}, <span class="hljs-string">'foo'</span>, <span class="hljs-string">'baz'</span>)
      }).to.throw()
    })

  it(<span class="hljs-string">'should return an array with an undefined value if passed an empty path and empty value and src is not an array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {}

    expect(op.insert(obj, <span class="hljs-string">''</span>)).to.be.deep.equal([<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>])
  })

  it(<span class="hljs-string">'should insert the value in src if passed an empty path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>]

    expect(op.insert(obj, <span class="hljs-string">''</span>, <span class="hljs-string">'d'</span>, <span class="hljs-number">1</span>)).to.be.deep.equal([<span class="hljs-string">'a'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>])
  })

  it(<span class="hljs-string">'should insert at a numeric path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    expect(op.insert([[<span class="hljs-number">23</span>, <span class="hljs-number">42</span>]], <span class="hljs-number">0</span>, <span class="hljs-string">'yo'</span>, <span class="hljs-number">1</span>)).to.deep.equal([[<span class="hljs-number">23</span>, <span class="hljs-string">'yo'</span>, <span class="hljs-number">42</span>]])
  })
})

describe(<span class="hljs-string">'push'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  it(<span class="hljs-string">'should push values without modifying the object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: [<span class="hljs-string">'a'</span>],
      <span class="hljs-attr">c</span>: {}
    }

    <span class="hljs-keyword">var</span> newObj = op.push(obj, <span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a).to.be.eql([<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>])
  })

  it(<span class="hljs-string">'should create intermediate objects/arrays'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: [],
      <span class="hljs-attr">c</span>: {}
    }

    <span class="hljs-keyword">var</span> newObj = op.push(obj, <span class="hljs-string">'a.0.1'</span>, <span class="hljs-string">'b'</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a).to.be.eql([[, [<span class="hljs-string">'b'</span>]]]) <span class="hljs-comment">// eslint-disable-line no-sparse-arrays</span>
  })

  it(<span class="hljs-string">'should push into the cloned original object if passed an empty path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = [<span class="hljs-string">'yoo'</span>]

    expect(op.push(obj, <span class="hljs-string">''</span>, <span class="hljs-string">'yo'</span>)).to.deep.equal([<span class="hljs-string">'yoo'</span>, <span class="hljs-string">'yo'</span>])
  })

  it(<span class="hljs-string">'returns new array if passed an empty path and src is not an array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {}

    expect(op.push(obj, <span class="hljs-string">''</span>, <span class="hljs-string">'yo'</span>)).to.deep.equal([<span class="hljs-string">'yo'</span>])
  })

  it(<span class="hljs-string">'should push at a numeric path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    expect(op.push([[]], <span class="hljs-number">0</span>, <span class="hljs-string">'yo'</span>)).to.deep.equal([[<span class="hljs-string">'yo'</span>]])
  })
})

describe(<span class="hljs-string">'del'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  it(<span class="hljs-string">'should delete deep values without modifying the object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">f</span>: <span class="hljs-number">2</span>
      },
      <span class="hljs-attr">c</span>: {}
    }

    <span class="hljs-keyword">var</span> newObj = op.del(obj, <span class="hljs-string">'a.d'</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a).to.be.eql({<span class="hljs-attr">f</span>: <span class="hljs-number">2</span>})
  })

  it(<span class="hljs-string">'should delete deep values in array without modifying the object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: [<span class="hljs-string">'a'</span>],
      <span class="hljs-attr">c</span>: {}
    }

    <span class="hljs-keyword">var</span> newObj = op.del(obj, <span class="hljs-string">'a.0'</span>)

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a).to.be.eql([])
  })

  it(<span class="hljs-string">'should return undefined if passed an empty path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {}

    expect(op.del(obj, <span class="hljs-string">''</span>)).to.be.equal(<span class="hljs-literal">undefined</span>)
  })

  it(<span class="hljs-string">'should del at a numeric path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    expect(op.del([<span class="hljs-number">23</span>, <span class="hljs-string">'yo'</span>, <span class="hljs-number">42</span>], <span class="hljs-number">1</span>)).to.deep.equal([<span class="hljs-number">23</span>, <span class="hljs-number">42</span>])
  })

  it(<span class="hljs-string">'should delete falsy value'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    expect(op.del([<span class="hljs-string">''</span>, <span class="hljs-literal">false</span>], <span class="hljs-number">1</span>)).to.deep.equal([<span class="hljs-string">''</span>])
  })
})

describe(<span class="hljs-string">'assign'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  it(<span class="hljs-string">'should assign an object without modifying the original object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>
      },
      <span class="hljs-attr">c</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">2</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.assign(obj, <span class="hljs-string">'a'</span>, {<span class="hljs-attr">b</span>: <span class="hljs-number">3</span>})

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(obj.a).to.be.eql({<span class="hljs-attr">b</span>: <span class="hljs-number">1</span>})
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a.b).to.be.equal(<span class="hljs-number">3</span>)
  })

  it(<span class="hljs-string">'should keep existing fields that are not overwritten'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.assign(obj, <span class="hljs-string">'a'</span>, {<span class="hljs-attr">c</span>: <span class="hljs-number">2</span>})

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(obj.a).to.be.eql({<span class="hljs-attr">b</span>: <span class="hljs-number">1</span>})
    expect(newObj.a).to.be.eql({<span class="hljs-attr">b</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">2</span>})
  })

  it(<span class="hljs-string">'should create intermediate objects'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {},
      <span class="hljs-attr">c</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">2</span>
      }
    }

    <span class="hljs-keyword">var</span> newObj = op.assign(obj, <span class="hljs-string">'a.b'</span>, {<span class="hljs-attr">f</span>: <span class="hljs-string">'a'</span>})

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(obj.a).to.be.eql({})
    expect(newObj.a).to.be.eql({<span class="hljs-attr">b</span>: {<span class="hljs-attr">f</span>: <span class="hljs-string">'a'</span>}})
  })

  it(<span class="hljs-string">'should return the original object if passed an empty path and an empty value to assign'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {}

    expect(op.assign(obj, <span class="hljs-string">''</span>, {})).to.be.equal(obj)
  })

  it(<span class="hljs-string">'should assign at a numeric path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    expect(op.assign([{
      <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>
    }], <span class="hljs-number">0</span>, {
      <span class="hljs-attr">foo</span>: <span class="hljs-string">'baz'</span>,
      <span class="hljs-attr">fiz</span>: <span class="hljs-string">'biz'</span>
    })).to.deep.equal([{
      <span class="hljs-attr">foo</span>: <span class="hljs-string">'baz'</span>,
      <span class="hljs-attr">fiz</span>: <span class="hljs-string">'biz'</span>
    }])
  })

  it(<span class="hljs-string">'does not assign inherited properties'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> base = {
      <span class="hljs-attr">fiz</span>: <span class="hljs-string">'biz'</span>
    }

    <span class="hljs-keyword">var</span> source = <span class="hljs-built_in">Object</span>.create(base)
    source.frob = <span class="hljs-string">'nard'</span>

    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">foo</span>: {}
    }

    expect(op.assign(obj, <span class="hljs-string">'foo'</span>, source)).to.deep.equal({
      <span class="hljs-attr">foo</span>: {
        <span class="hljs-attr">frob</span>: <span class="hljs-string">'nard'</span>
      }
    })
  })
})

describe(<span class="hljs-string">'bind'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  it(<span class="hljs-string">'should execute all methods on the bound object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">d</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">f</span>: <span class="hljs-number">2</span>
      },
      <span class="hljs-attr">c</span>: {}
    }

    <span class="hljs-keyword">var</span> newObj = op(obj).set(<span class="hljs-string">'a.q'</span>, <span class="hljs-string">'q'</span>).del(<span class="hljs-string">'a.d'</span>).update(<span class="hljs-string">'a.f'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> v + <span class="hljs-number">1</span>
    }).value()

    expect(newObj).not.to.be.equal(obj)
    expect(newObj.a).not.to.be.equal(obj.a)
    expect(newObj.c).to.be.equal(obj.c)

    expect(newObj.a).to.be.eql({<span class="hljs-attr">f</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">q</span>: <span class="hljs-string">'q'</span>})
  })

  it(<span class="hljs-string">'should return the bound object if no operations made'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> obj = {}

    expect(op(obj).value()).to.be.equal(obj)
  })

  it(<span class="hljs-string">'should throw if an operation is attempted after `value` called'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> transaction = op({
      <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>,
      <span class="hljs-attr">fiz</span>: [],
      <span class="hljs-attr">frob</span>: {}
    })

    transaction.value()

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      transaction.set(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'baz'</span>)
    }).to.throw()

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      transaction.push(<span class="hljs-string">'fiz'</span>, <span class="hljs-string">'biz'</span>)
    }).to.throw()

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      transaction.insert(<span class="hljs-string">'fiz'</span>, <span class="hljs-string">'biz'</span>, <span class="hljs-number">23</span>)
    }).to.throw()

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      transaction.del(<span class="hljs-string">'foo'</span>)
    }).to.throw()

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-comment">/* istanbul ignore next */</span>
      transaction.update(<span class="hljs-string">'foo'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">return</span> v + <span class="hljs-string">'bar'</span>
      })
    }).to.throw()

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      transaction.assign(<span class="hljs-string">'frob'</span>, {
        <span class="hljs-attr">nard</span>: <span class="hljs-number">23</span>
      })
    }).to.throw()
  })
})

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
